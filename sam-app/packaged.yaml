AWSTemplateFormatVersion: '2010-09-09'
Description: 'sam-app

  Sample SAM Template for sam-app

  '
Globals:
  Function:
    Timeout: 3
Outputs:
  HelloWorldFunction:
    Description: Hello World Lambda Function ARN
    Value:
      Fn::GetAtt:
      - HelloWorldFunction
      - Arn
  HelloWorldFunctionIamRole:
    Description: Implicit IAM Role created for Hello World function
    Value:
      Fn::GetAtt:
      - HelloWorldFunctionRole
      - Arn
  LifeBacAPI:
    Description: API Gateway endpoint URL for Prod stage for Hello World function
    Value:
      Fn::Sub: https://${ApiGatewayApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/hello/
Resources:
  ApiGatewayApi:
    Properties:
      Auth:
        Authorizers:
          MyCognitoAuth:
            Identity:
              Header: Authorization
            UserPoolArn: arn:aws:cognito-idp:us-east-2:824408457354:userpool/us-east-2_vUJjKdm26
        DefaultAuthorizer: MyCognitoAuth
      DefinitionBody:
        basePath: /Prod
        info:
          title: simpleGet
          version: '2018-12-27T19:28:53Z'
        paths:
          /hello:
            get:
              response: {}
              x-amazon-apigateway-integration:
                httpMethod: POST
                passthroughBehavior: when_no_match
                type: aws_proxy
                uri: arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-2:824408457354:function:HelloWorldFunction:test/invocations
        schemes:
        - https
        swagger: '2.0'
      Name: ApiGatewayApi
      StageName: Prod
    Type: AWS::Serverless::Api
  HelloWorldFunction:
    Properties:
      AutoPublishAlias: test
      CodeUri: s3://code-ohio/39b62994816aed8f33a81764d467f7c5
      Environment:
        Variables:
          PARAM1: VALUE
      Events:
        ApiEvent:
          Properties:
            Auth:
              Authorizer: MyCognitoAuth
            Method: get
            Path: /hello
            RestApiId:
              Ref: ApiGatewayApi
          Type: Api
      FunctionName: HelloWorldFunction
      Handler: app.lambda_handler
      Runtime: python3.6
    Type: AWS::Serverless::Function
Transform: AWS::Serverless-2016-10-31
